{"version":3,"sources":["Func.js","Drawing.Basic.js","Drawing.Free.js"],"names":["window","$$","func","FUNC","offsetScreen","node","document","body","top","left","offsetTop","offsetLeft","parentNode","scrollTop","scrollLeft","getMousePos","e","parent","pos","undefined","pageX","originalEvent","touches","pageY","offset","draw","DRAW","Basic","container","para","this","_canvas","createElement","_ctx","getContext","appendChild","resize","prototype","Object","create","constructor","copy","drawImage","clear","clearRect","width","height","getImage","image","Image","src","toDataURL","destroy","offsetWidth","offsetHeight","FreeDraw","call","_setupBinding","startDrawing","i","beginPath","_lastPos","addEventListener","_fn_draw","stopDrawing","removeEventListener","that","mousePos","moveTo","console","log","lineTo","stroke","freeDraw"],"mappings":"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","file":"Drawing.min.js","sourcesContent":["window.$$ = window.$$ || {};\r\nwindow.$$.func = window.$$.func || {};\r\n\r\n(function (FUNC) {\r\n    \"use strict\";\r\n    FUNC.offsetScreen = function (node) {\r\n        if (node === document.body) return {top:0, left:0};\r\n        var top = node.offsetTop,\r\n            left = node.offsetLeft;\r\n        node = node.parentNode;\r\n        while (node !== document.body) {\r\n            top -= node.scrollTop;\r\n            left -= node.scrollLeft;\r\n            node = node.parentNode;\r\n        }\r\n        return { top: top, left: left };\r\n    };\r\n    \r\n    FUNC.getMousePos = function (e, parent) {\r\n        var pos;\r\n        if (e.pageX == undefined) {\r\n            pos = [e.originalEvent.touches[0].pageX, e.originalEvent.touches[0].pageY];\r\n        } else {\r\n            pos = [e.pageX, e.pageY];\r\n        }\r\n        if (parent != undefined) {\r\n            var offset = FUNC.offsetScreen(parent);\r\n            pos[0] -= offset.left;\r\n            pos[1] -= offset.top;\r\n        }\r\n        return pos;\r\n    };\r\n\r\n})(window.$$.func);\r\n","window.$$ = window.$$ || {};\r\nwindow.$$.draw = window.$$.draw || {};\r\n\r\n(function (DRAW) {\r\n\t\"use strict\";\r\n\r\n\tvar Basic = function (container, para) {\r\n\t\tthis.container = container;\r\n\t\tthis.para = para;\r\n\t\tthis._canvas = document.createElement('canvas');\r\n\t\tthis._ctx = this._canvas.getContext('2d');\r\n\t\tthis.container.appendChild(this._canvas);\r\n\t\tthis.resize();\r\n\t};\r\n\tBasic.prototype = Object.create(null);\r\n\tBasic.prototype.constructor = Basic;\r\n\r\n\tBasic.prototype.copy = function () {\r\n\t\t// copy the element and return the copy\r\n\t    var copy = new Basic(this.container, para);\r\n\t    copy._ctx.drawImage(this._canvas, 0, 0);\r\n\t\treturn copy;\r\n\t};\r\n\r\n\tBasic.prototype.draw = function () {\r\n\t    // draw element\r\n\t};\r\n\r\n\tBasic.prototype.clear = function () {\r\n\t    // clear the canvas\r\n\t    this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n\t};\r\n\r\n\tBasic.prototype.getImage = function () {\r\n\t    // get the canvas image\r\n\t    var image = new Image();\r\n\t    image.src = this._canvas.toDataURL();\r\n\t    return image;\r\n\t};\r\n\r\n\tBasic.prototype.destroy = function () {\r\n\t    // destroy the element and release all memory\r\n\t    this._canvas = null;\r\n\t    this._ctx = null;\r\n\t};\r\n\r\n\tBasic.prototype.resize = function () {\r\n\t    // resize the canvas\r\n\t    this._canvas.width = this.container.offsetWidth;\r\n\t    this._canvas.height = this.container.offsetHeight;\r\n\t};\r\n\r\n\tDRAW.Basic = Basic;\r\n})(window.$$.draw);\r\n","window.$$ = window.$$ || {};\r\nwindow.$$.draw = window.$$.draw || {};\r\n\r\n(function (DRAW, FUNC) {\r\n    \"use strict\";\r\n\r\n    var FreeDraw = function (container, para) {\r\n        DRAW.Basic.call(this, container, para);\r\n        this._setupBinding();\r\n    };\r\n    FreeDraw.prototype = Object.create(DRAW.Basic.prototype);\r\n    FreeDraw.prototype.constructor = FreeDraw;\r\n\r\n    FreeDraw.prototype.startDrawing = function (para) {\r\n        // draw element\r\n        var para = para || {};\r\n        for (var i in para) this._ctx[i] = para[i];\r\n        this._ctx.beginPath();\r\n        this._lastPos = null;\r\n        this.container.addEventListener(\"mousemove\", this._fn_draw, false);\r\n    };\r\n\r\n    FreeDraw.prototype.stopDrawing = function () {\r\n        this._lastPos = null;\r\n        this.container.removeEventListener(\"mousemove\", this._fn_draw, false);\r\n    };\r\n\r\n    FreeDraw.prototype._setupBinding = function () {\r\n        var that = this;\r\n        \r\n        this._lastPos = null;\r\n        this._fn_draw = function (e) {\r\n            var mousePos = FUNC.getMousePos(e, this);\r\n            if (that._lastPos === null) {\r\n                that._lastPos = mousePos;\r\n                that._ctx.moveTo(mousePos[0], mousePos[1]);\r\n                return false;\r\n            }\r\n            console.log(mousePos);\r\n            that._ctx.lineTo(mousePos[0], mousePos[1]);\r\n            that._ctx.stroke();\r\n            that._lastPos = mousePos;\r\n        };\r\n    };\r\n\r\n    DRAW.freeDraw = FreeDraw;\r\n})(window.$$.draw, window.$$.func);\r\n"],"sourceRoot":"/source/"}